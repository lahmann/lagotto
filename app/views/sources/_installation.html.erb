<% if @groups.size > 0 %>
  <table class="table">
    <thead>
      <tr>
        <th class="group">Group</th>
        <th class="name">Source</th>
        <% if can?(:manage, Alert) %>
          <th class="status">Actions</th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @groups.with_sources.each do |group| %>
        <% group.sources.each do |source| %>
          <tr>
            <% if group.sources.first.name == source.name %>
              <td <%= "rowspan=#{group.sources.count}" %>><h4><%= h(group.display_name) %></h4></td>
            <% end %>
            <td><%= link_to_if source.active, source.display_name, source_path(source) %></td>
            <% if can?(:manage, Alert) %>
              <td>
                <% if source.active %>
                 <%= link_to 'Inactivate', source_path(source, active: false), :method => :put, :remote => true, :class => 'btn btn-default btn-sm', :id => "#{source.name}-status", :title => "Inactivate Source" %>
                <% else %>
                  <%= link_to 'Activate', source_path(source, active: true), :method => :put, :remote => true, :class => 'btn btn-info btn-sm', :id => "#{source.name}-status", :title => "Activate Source" %>
                <% end %>
              </td>
            <% end %>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
<% else %>
  <div class="alert alert-info">There are currently no groups</div>
<% end %>
